# DZKonfig1

Разработать эмулятор для языка оболочки ОС.

Необходимо сделать работу эмулятора как можно более похожей на сеанс shell в UNIX-подобной ОС. Эмулятор должен запускаться из реальной командной строки, а файл с виртуальной файловой системой не нужно распаковывать у пользователя. Эмулятор принимает образ виртуальной файловой системы в виде файла формата tar. Эмулятор должен работать в режиме CLI.

Ключами командной строки задаются: 

  • Имя компьютера для показа в приглашении к вводу.
  
  • Путь к архиву виртуальной файловой системы. 
  
  • Путь к стартовому скрипту.
      
Стартовый скрипт служит для начального выполнения заданного списка команд из файла. 

Необходимо поддержать в эмуляторе команды ls, cd и exit, а также следующие команды:

1. cp.
2. history.
  
Все функции эмулятора должны быть покрыты тестами, а для каждой из поддерживаемых команд необходимо написать 3 теста. 


**Решение в файле "mainprogramm.txt"**


▎Импортируемые библиотеки

• subprocess: используется для выполнения команд в подсистеме

• argparse: библиотека для обработки аргументов командной строки.

• tarfile: библиотека для работы с tar-архивами.

• BytesIO: используется для работы с байтовыми потоками.

▎Функции

1. ls_com(archive_path, path):

   • Открывает tar-архив и выводит файлы в указанном пути.

   • Проходит по всем элементам архива, проверяет путь каждого файла и выводит имена файлов, если путь совпадает с заданным.

2. cd_com(com, path):

   • Обрабатывает команду cd, разбивая её на части и возвращая список директорий (путь).

3. cp_com(archive_path, com, path):

   • Копирует файл внутри tar-архива.(Извлекает файл по имени из архива и добавляет его в архив с новым именем.)

▎Основная функция main()

• Использует argparse для получения аргументов командной строки: имя хоста, путь к архиву файловой системы и путь к скрипту запуска.

• Инициализирует переменные для хранения текущего пути и истории команд.

• Запускает бесконечный цикл, в котором обрабатывает пользовательский ввод:

  • Если введена команда ls, вызывает ls_com.

  • Если введена команда exit, завершает цикл.

  • Если введена команда cd, обновляет текущий путь с помощью cd_com. Заходи т в каталог, указанный пользователем.

  • Если введена команда history, выводит историю команд.

  • Если введена команда cp, вызывает cp_com для копирования файла в архиве.
